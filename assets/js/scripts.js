"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function previewFile(){var e=document.querySelector(".registration__photo-title"),r=document.querySelector(".registration__icon--photo"),o=document.querySelector(".registration__label--photo");if(photoFile=document.querySelector(".registration__field--photo").files[0],"image/png"!=photoFile.type&&"image/jpeg"!=photoFile.type)return errorMessage.innerHTML="Доступный формат фото: jpg и png",addPhoto.style.backgroundColor="rgba(255, 0, 0, .5)",void(addPhoto.style.backgroundImage="");if(errorMessage.innerHTML="",photoFile.size>512e3)return errorMessage.innerHTML="Максимальные размер файлы 500 КБ",addPhoto.style.backgroundColor="rgba(255, 0, 0, .5)",void(addPhoto.style.backgroundImage="");errorMessage.innerHTML="";var t=new FileReader;t.onloadend=function(){photo=t.result,addPhoto.style.backgroundImage="url('"+photo+"')",e.innerHTML="",o.removeChild(r)},photoFile?t.readAsDataURL(photoFile):(addPhoto.style.backgroundImage="",e.innerHTML="Загрузить фото"),document.querySelector(".registration__field--photo").value=""}function addUserFunc(){var e=document.querySelector(".registration__field--name");name=e.value;var r=document.querySelector(".registration__field--surname");surname=r.value;var o=document.querySelector(".registration__photo-button");if(!name)return e.style.borderColor="rgba(255, 0, 0, .5)",void(errorMessage.innerHTML="Все поля обязательны к заполнению");if(errorMessage.innerHTML="",e.style.borderColor="",!surname)return r.style.borderColor="rgba(255, 0, 0, .5)",void(errorMessage.innerHTML="Все поля обязательны к заполнению");if(errorMessage.innerHTML="",r.style.borderColor="",!photoFile)return void(o.style.backgroundColor="rgba(255, 0, 0, .5)");if(errorMessage.innerHTML="",o.style.backgroundColor="","image/png"!=photoFile.type&&"image/jpeg"!=photoFile.type)return errorMessage.innerHTML="Доступный формат фото: jpg и png",void(o.style.backgroundColor="rgba(255, 0, 0, .5)");if(errorMessage.innerHTML="",photoFile.size>512e3)return errorMessage.innerHTML="Максимальные размер файлы 500 КБ",void(o.style.backgroundColor="rgba(255, 0, 0, .5)");errorMessage.innerHTML="";var t=new Users(name,surname,photo);localStorage.setItem("user",JSON.stringify(t)),window.location.href="profile.html",e.value="",r.value=""}function createProfile(){if(userProfile){if(!localData)return alert("Неудачная попытка создания профиля"),void(window.location.href="/index.html");name=data.name,surname=data.surname,photoFile=data.photo;var e=document.querySelector(".user__name"),r=document.querySelector(".user__surname"),o=document.querySelector(".user__photo");e.innerHTML=name,r.innerHTML=surname,o.src=photoFile,o.alt="Фото "+name+" "+surname}}var name,surname,photo,photoFile,data={},addUser=document.querySelector(".js-adduser-btn"),errorMessage=document.querySelector(".js-error-message"),addPhoto=document.querySelector(".registration__photo-button"),localData=localStorage.getItem("user");localData&&(data=JSON.parse(localData));var Users=function e(r,o,t){_classCallCheck(this,e),this.name=r,this.surname=o,this.photo=t};addUser&&addUser.addEventListener("click",function(){addUserFunc()}),window.addEventListener("keydown",function(){13==event.keyCode&&addUserFunc()});var userProfile=document.querySelector(".user");createProfile();