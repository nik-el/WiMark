"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function previewFile(){var e=document.querySelector(".registration__field--photo").files[0],r=document.querySelector(".registration__photo-title"),o=document.querySelector(".registration__icon--photo"),t=document.querySelector(".registration__label--photo"),n=document.querySelector(".registration__photo-button"),a=new FileReader;a.onloadend=function(){photo=a.result,n.style.backgroundImage="url('"+photo+"')",r.innerHTML="",t.removeChild(o)},e&&a.readAsDataURL(e)}function addUserFunc(){var e=document.querySelector(".registration__field--name");name=e.value;var r=document.querySelector(".registration__field--surname");surname=r.value;var o=document.querySelector(".registration__field--photo").files[0],t=document.querySelector(".registration__photo-button");if(!name)return e.style.borderColor="rgba(255, 0, 0, .5)",void(errorMessage.innerHTML="Все поля обязательны к заполнению");if(errorMessage.innerHTML="",e.style.borderColor="",!surname)return r.style.borderColor="rgba(255, 0, 0, .5)",void(errorMessage.innerHTML="Все поля обязательны к заполнению");if(errorMessage.innerHTML="",r.style.borderColor="",!o)return t.style.backgroundColor="rgba(255, 0, 0, .5)",void(errorMessage.innerHTML="Добавьте фото");if(errorMessage.innerHTML="",t.style.backgroundColor="","image/png"!=o.type&&"image/jpeg"!=o.type)return void(errorMessage.innerHTML="Доступный формат фото: jpg и png");if(o.size>512e3)return void(errorMessage.innerHTML="Максимальные размер файлы 500 КБ");var n=new Users(name,surname,photo);localStorage.setItem("user",JSON.stringify(n)),window.location.href="profile.html",e.value="",r.value=""}function createProfile(){if(userProfile){if(!localData)return alert("Неудачная попытка создания профиля"),void(window.location.href="/index.html");name=data.name,surname=data.surname,photoUrl=data.photo;var e=document.querySelector(".user__name"),r=document.querySelector(".user__surname"),o=document.querySelector(".user__photo");e.innerHTML=name,r.innerHTML=surname,o.src=photoUrl,o.alt="Фото "+name+" "+surname}}var name,surname,photo,data={},addUser=document.querySelector(".js-adduser-btn"),errorMessage=document.querySelector(".js-error-message"),localData=localStorage.getItem("user");localData&&(data=JSON.parse(localData));var Users=function e(r,o,t){_classCallCheck(this,e),this.name=r,this.surname=o,this.photo=t};addUser&&addUser.addEventListener("click",function(){addUserFunc()}),window.addEventListener("keydown",function(){13==event.keyCode&&addUserFunc()});var userProfile=document.querySelector(".user");createProfile();